При закрытии всплывающего окна confirm закрывается блок редактирования
Переместить события line в соответствующий объект +
Сохранять фокусирование на выбранном элементе при закрытии окна +
Собрать все стили и скрипты и сделать отдельной библиотекой
Проработать масштабируемость, чтобы можно было сделать несколько веток

Если нечаяно создать два братских элемента, то редактирование во втором по началу ничего не сделает,
но добавив во второй подстрочку, она появится в первом и применится редактирование ко второму

.onfocus() добавляет обработчики событий клавиатуры и вообще. Какая-то магия